(()=>{"use strict";const e=document.querySelector(".locations__form"),t=document.querySelector(".locations__input"),n=document.querySelector(".info__temp"),o=document.querySelector(".info__name"),r=document.querySelector(".info__favorit-img"),a=document.querySelector(".locations__list"),c=document.querySelector(".locations__prev"),i=document.querySelector(".info__status"),s=document.querySelector(".info__feels-like"),u=document.querySelector(".info__btn"),l=document.querySelector(".info"),m=document.querySelector(".info__top"),d=document.querySelector(".info__bottom"),f=document.querySelector(".info__start-message"),y=document.querySelector(".info__btn"),g=document.querySelector(".more-info"),b=document.querySelector(".more-info-close__btn"),S=document.querySelector(".info__date"),_=document.querySelector(".info__day"),p=document.querySelector(".info__img"),h={checkCurrentCityInStorage:()=>!!localStorage.getItem("current city"),checkFavoriteCitiesInStorage:()=>!!localStorage.getItem("favorite cities"),setCurrentCity(e){const t=JSON.stringify(e);localStorage.setItem("current city",t)},setFavoriteCities(e){const t=JSON.stringify(e);localStorage.setItem("favorite cities",t)},getCityInStorage:()=>JSON.parse(localStorage.getItem("current city")),getFavoriteCities:()=>JSON.parse(localStorage.getItem("favorite cities"))},v=new Set;function k(e){const t=`\n    <li class="locations__item">\n      <button class="locations__btn btn-reset">${e.name}</button>\n      <button class="locations__remove-btn btn-reset">\n        <img\n          src="img/icons/cross.png"\n          alt=""\n          class="locations__remove-img"\n        />\n      </button>\n    </li>\n    `;c.remove(),a.insertAdjacentHTML("afterbegin",t),v.add(e),h.setFavoriteCities([...v])}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function q(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function w(e){const t=function(e){return q(1,arguments),function(e){q(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===C(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}(1e3*function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(e))}(e),n=t.getDate(),o=t.getDay(),r=t.getMonth(),a=t.getFullYear();let c,i;switch(r){case 0:c="January";break;case 1:c="February";break;case 2:c="March";break;case 3:c="April";break;case 4:c="May";break;case 5:c="June";break;case 6:c="July";break;case 7:c="August";break;case 8:c="September";break;case 9:c="October";break;case 10:c="November";break;case 11:c="December"}switch(o){case 1:i="Mondey";break;case 2:i="Tuesday";break;case 3:i="Wednesday";break;case 4:i="Thursday";break;case 5:i="Friday";break;case 6:i="Saturday";break;case 7:i="Sunday"}return{day:n,nameDay:i,month:c,year:a}}function I(e){const t=e.name,r=(e.main.temp-273.5).toFixed(1),a=(e.main.feels_like-273.5).toFixed(1),{description:c}=e.weather[0],y=e.dt,{icon:g}=e.weather[0];var b;o.textContent=t,n.textContent=`${r} °C`,s.textContent=`Feels like: ${a} °C`,i.textContent=c.split(" ").map((e=>e[0].toUpperCase()+e.slice(1))).join(" "),S.textContent=`${w(y).day} ${w(y).month} ${w(y).year}`,_.textContent=`${w(y).nameDay}`,b=g,p.setAttribute("src",`https://openweathermap.org/img/wn//${b}@2x.png`),u.classList.remove("is-hidden"),l.classList.remove("info--start"),m.classList.remove("is-hidden"),d.classList.remove("is-hidden"),f.remove(),h.setCurrentCity(e),N.push(e)}const N=[];function F(){g.classList.toggle("is-hidden")}e.addEventListener("submit",(function(e){e.preventDefault();const n=t.value;t.value="",t.blur(),function(e){try{fetch(e).then((e=>e.json())).then((e=>{I(e)})).catch((e=>console.log(e)))}catch(e){console.log(e)}}(`http://api.openweathermap.org/data/2.5/weather?q=${n}&appid=f660a2fb1e4bad108d6160b7f58c555f`)})),r.addEventListener("click",(function(){const e=N[N.length-1];(function(e){let t=!0;return v.forEach((n=>{n.name===e.name&&(t=!1)})),t})(e)&&k(e)})),a.addEventListener("click",(function(e){if("locations__remove-img"===e.target.className){const n=e.target,o=n.closest(".locations__item"),r=n.parentElement.previousElementSibling.textContent;o.remove(),v.forEach((e=>{e.name===r&&v.delete(e)})),t=v,h.setFavoriteCities([...t])}var t})),a.addEventListener("click",(function(e){if("locations__btn btn-reset"===e.target.className){const o=h.getFavoriteCities(),r=(t=e.target.textContent,"object"==typeof(n=o)?[...n].findIndex((e=>e.name===t)):n.findIndex((e=>e.name===t)));I([...v][r])}var t,n})),y.addEventListener("click",F),b.addEventListener("click",F),h.checkCurrentCityInStorage()&&I(h.getCityInStorage()),h.checkFavoriteCitiesInStorage()&&h.getFavoriteCities().forEach((e=>{k(e)}))})();